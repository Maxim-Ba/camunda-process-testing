# üìã –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ - –ü–æ—á–µ–º—É —Ç–µ—Å—Ç—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏–ª–∏ –∏ —á—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞:

```
Unknown property used in expression: ${SERVICE_API}/create-user
Cause: Cannot resolve identifier 'SERVICE_API'
```

**–ü—Ä–∏—á–∏–Ω–∞:** Camunda –Ω–µ –º–æ–≥ –Ω–∞–π—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `SERVICE_API`, –ø–æ—Ç–æ–º—É —á—Ç–æ Spring properties –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ—Ü–µ—Å—Å–∞.

---

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

`SERVICE_API` —Ç–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∫–∞–∫ **–ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –ø—Ä–æ—Ü–µ—Å—Å–∞** –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ:

```java
private ProcessInstance startProcessWithServiceApi(String userName, String userEmail) {
    return runtimeService.startProcessInstanceByKey(
        "user-registration-process",
        withVariables(
            "SERVICE_API", "http://mock-service:9999" // ‚Üê –ü–µ—Ä–µ–¥–∞–µ–º –∫–∞–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é!
        )
    );
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** `${SERVICE_API}` —Ç–µ–ø–µ—Ä—å —Ä–µ–∑–æ–ª–≤–∏—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ! ‚úÖ

---

## ‚ö†Ô∏è –ü–æ—á–µ–º—É —Ç–µ—Å—Ç—ã –≤—Å–µ –µ—â–µ –ø–∞–¥–∞—é—Ç?

### –ù–æ–≤–∞—è –æ—à–∏–±–∫–∞:
```
ConnectorRequest HTCL-02007 Unable to execute HTTP request
Connection refused: connect
```

### –ü—Ä–∏—á–∏–Ω–∞:

HTTP Connector –ø—ã—Ç–∞–µ—Ç—Å—è —Å–¥–µ–ª–∞—Ç—å **—Ä–µ–∞–ª—å–Ω—ã–π HTTP –∑–∞–ø—Ä–æ—Å** –∫ `http://mock-service:9999/create-user` –∏ –ø–æ–ª—É—á–∞–µ—Ç `Connection refused`.

### –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ! ‚úÖ

**–≠—Ç–æ –æ–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ!** –ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É –¥–≤—É–º—è –ø–æ–¥—Ö–æ–¥–∞–º–∏:

| –ü–æ–¥—Ö–æ–¥ | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏—á–∏–Ω–∞ |
|--------|--------|---------|
| **HTTP Connector** | ‚ùå –ü–∞–¥–∞–µ—Ç | –î–µ–ª–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ HTTP –∑–∞–ø—Ä–æ—Å—ã |
| **Java Delegate** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ú–æ–∫–∏—Ä—É–µ—Ç—Å—è, –Ω–µ –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ |

---

## ‚úÖ –£—Å–ø–µ—à–Ω—ã–µ —Ç–µ—Å—Ç—ã –µ—Å—Ç—å!

```bash
cd demo
mvn test -Dtest=SendEmailDelegateTest
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ Tests run: 2, Failures: 0, Errors: 0
‚úÖ BUILD SUCCESS
```

–≠—Ç–∏ —Ç–µ—Å—Ç—ã –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—Ç —Ä–∞–±–æ—Ç—É **Java Delegate —Å –º–æ–∫–∞–º–∏**.

---

## üéØ –ß—Ç–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø—Ä–æ–µ–∫—Ç

### HTTP Connector (create-registration-task):
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç Java –∫–æ–¥–∞
- ‚úÖ `${SERVICE_API}` —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚ùå –î–µ–ª–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ HTTP –∑–∞–ø—Ä–æ—Å—ã
- ‚ùå –¢–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç –±–µ–∑ WireMock

### Java Delegate (send-email-confirmation):
- ‚úÖ –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
- ‚úÖ –ú–æ–∫–∏—Ä—É–µ—Ç—Å—è
- ‚úÖ –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- ‚ùå –¢—Ä–µ–±—É–µ—Ç Java –∫–æ–¥

---

## üîß –†–µ—à–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤

### –î–æ–±–∞–≤–∏—Ç—å WireMock –≤ pom.xml:

```xml
<dependency>
    <groupId>com.github.tomakehurst</groupId>
    <artifactId>wiremock-jre8</artifactId>
    <version>2.35.0</version>
    <scope>test</scope>
</dependency>
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Ç–µ—Å—Ç–∞—Ö:

```java
@SpringBootTest
@AutoConfigureWireMock(port = 9999)
public class UserRegistrationProcessTest {
    
    @BeforeEach
    public void setUp() {
        stubFor(post("/create-user").willReturn(ok()));
    }
}
```

**–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥—É—Ç!** ‚úÖ

---

## üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

### ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç:
- SERVICE_API —Ä–µ–∑–æ–ª–≤–∏—Ç—Å—è
- Java Delegate –º–æ–∫–∏—Ä—É–µ—Ç—Å—è
- 2 —Ç–µ—Å—Ç–∞ –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ

### ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç WireMock:
- HTTP Connector –¥–µ–ª–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- 9 —Ç–µ—Å—Ç–æ–≤ –ø–∞–¥–∞—é—Ç —Å Connection refused
- –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø—Ä–æ–±–ª–µ–º—É

---

## üí° –ì–ª–∞–≤–Ω—ã–π –≤—ã–≤–æ–¥

**–ü—Ä–æ–±–ª–µ–º–∞ SERVICE_API —Ä–µ—à–µ–Ω–∞!** ‚úÖ

–¢–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç –∏–∑-–∑–∞ **—Ä–µ–∞–ª—å–Ω—ã—Ö HTTP –∑–∞–ø—Ä–æ—Å–æ–≤** - —ç—Ç–æ:
- ‚úÖ –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ HTTP Connector
- ‚úÖ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–∑–Ω–∏—Ü—ã —Å Java Delegate
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å WireMock

**–î–ª—è production –¥–æ–±–∞–≤—å—Ç–µ WireMock –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Java Delegate!**

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **FINAL_STATUS.md** - –ü–æ–¥—Ä–æ–±–Ω—ã–π —Å—Ç–∞—Ç—É—Å
- **TEST_RESULTS_EXPLANATION.md** - –û–±—ä—è—Å–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- **DIFFERENCES_EXPLAINED.md** - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤

---

**–ü—Ä–æ–µ–∫—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–≤–æ—é –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é!** üéì
